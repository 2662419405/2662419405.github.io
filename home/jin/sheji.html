<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端设计模式 | 学习笔记文档</title>
    <meta name="description" content="每天学一点,进步多一点">
    <link rel="icon" href="/favicon.ico">script,[object Object]
    
    <link rel="preload" href="/assets/css/0.styles.c0326022.css" as="style"><link rel="preload" href="/assets/js/app.2216b0d7.js" as="script"><link rel="preload" href="/assets/js/2.68a23561.js" as="script"><link rel="preload" href="/assets/js/3.5044cbf1.js" as="script"><link rel="preload" href="/assets/js/43.d247f190.js" as="script"><link rel="prefetch" href="/assets/js/10.45b1f067.js"><link rel="prefetch" href="/assets/js/11.db852499.js"><link rel="prefetch" href="/assets/js/12.c3b31ac3.js"><link rel="prefetch" href="/assets/js/13.36850721.js"><link rel="prefetch" href="/assets/js/14.f5c5471b.js"><link rel="prefetch" href="/assets/js/15.6dfe0578.js"><link rel="prefetch" href="/assets/js/16.f1a20213.js"><link rel="prefetch" href="/assets/js/17.8457fb10.js"><link rel="prefetch" href="/assets/js/18.83a8e749.js"><link rel="prefetch" href="/assets/js/19.554d8da8.js"><link rel="prefetch" href="/assets/js/20.5d819bfb.js"><link rel="prefetch" href="/assets/js/21.3d364ae0.js"><link rel="prefetch" href="/assets/js/22.52e9a35a.js"><link rel="prefetch" href="/assets/js/23.a5846348.js"><link rel="prefetch" href="/assets/js/24.87143f91.js"><link rel="prefetch" href="/assets/js/25.c14761ff.js"><link rel="prefetch" href="/assets/js/26.19a69d70.js"><link rel="prefetch" href="/assets/js/27.9e519306.js"><link rel="prefetch" href="/assets/js/28.15c6cd0a.js"><link rel="prefetch" href="/assets/js/29.21f85f42.js"><link rel="prefetch" href="/assets/js/30.5311dde9.js"><link rel="prefetch" href="/assets/js/31.822d8a20.js"><link rel="prefetch" href="/assets/js/32.2ea6cf26.js"><link rel="prefetch" href="/assets/js/33.8a9616b9.js"><link rel="prefetch" href="/assets/js/34.28db20ae.js"><link rel="prefetch" href="/assets/js/35.47db92bf.js"><link rel="prefetch" href="/assets/js/36.245787b5.js"><link rel="prefetch" href="/assets/js/37.fb4d506f.js"><link rel="prefetch" href="/assets/js/38.c149e299.js"><link rel="prefetch" href="/assets/js/39.fe2013db.js"><link rel="prefetch" href="/assets/js/4.b862cb3a.js"><link rel="prefetch" href="/assets/js/40.a975ee57.js"><link rel="prefetch" href="/assets/js/41.c6a758c9.js"><link rel="prefetch" href="/assets/js/42.1aca9bf0.js"><link rel="prefetch" href="/assets/js/44.a1c5ab23.js"><link rel="prefetch" href="/assets/js/45.602f0385.js"><link rel="prefetch" href="/assets/js/46.1840e776.js"><link rel="prefetch" href="/assets/js/47.fce824eb.js"><link rel="prefetch" href="/assets/js/48.b1fd68b6.js"><link rel="prefetch" href="/assets/js/49.73915f05.js"><link rel="prefetch" href="/assets/js/5.1adb00f6.js"><link rel="prefetch" href="/assets/js/50.28a4ea47.js"><link rel="prefetch" href="/assets/js/51.ca35b586.js"><link rel="prefetch" href="/assets/js/52.bd59c449.js"><link rel="prefetch" href="/assets/js/53.20d96f8d.js"><link rel="prefetch" href="/assets/js/54.6bdd3dcd.js"><link rel="prefetch" href="/assets/js/55.a0ce4a5a.js"><link rel="prefetch" href="/assets/js/56.8bfc2ec3.js"><link rel="prefetch" href="/assets/js/57.7a28a6b5.js"><link rel="prefetch" href="/assets/js/58.0c7de73d.js"><link rel="prefetch" href="/assets/js/59.942b8e44.js"><link rel="prefetch" href="/assets/js/6.50c651ed.js"><link rel="prefetch" href="/assets/js/60.f48ac95f.js"><link rel="prefetch" href="/assets/js/61.c0fcda67.js"><link rel="prefetch" href="/assets/js/62.72efa57a.js"><link rel="prefetch" href="/assets/js/63.5c3d206a.js"><link rel="prefetch" href="/assets/js/64.637cdff9.js"><link rel="prefetch" href="/assets/js/65.44e0b262.js"><link rel="prefetch" href="/assets/js/66.2c9c712a.js"><link rel="prefetch" href="/assets/js/67.81afe47c.js"><link rel="prefetch" href="/assets/js/68.7f477291.js"><link rel="prefetch" href="/assets/js/69.b0cf62c4.js"><link rel="prefetch" href="/assets/js/7.6e78bb48.js"><link rel="prefetch" href="/assets/js/70.8ecb3d6e.js"><link rel="prefetch" href="/assets/js/71.0d102129.js"><link rel="prefetch" href="/assets/js/72.ddf7fbd6.js"><link rel="prefetch" href="/assets/js/73.60b4d8ca.js"><link rel="prefetch" href="/assets/js/74.3229adb6.js"><link rel="prefetch" href="/assets/js/75.1fceef25.js"><link rel="prefetch" href="/assets/js/76.6781a71a.js"><link rel="prefetch" href="/assets/js/77.d0b90f7d.js"><link rel="prefetch" href="/assets/js/78.b0b1b175.js"><link rel="prefetch" href="/assets/js/79.d4bb4f02.js"><link rel="prefetch" href="/assets/js/8.2709a49b.js"><link rel="prefetch" href="/assets/js/80.4f38128a.js"><link rel="prefetch" href="/assets/js/81.90371362.js"><link rel="prefetch" href="/assets/js/82.e4aaf327.js"><link rel="prefetch" href="/assets/js/83.51ab40e0.js"><link rel="prefetch" href="/assets/js/84.7426a37b.js"><link rel="prefetch" href="/assets/js/85.6272bcc7.js"><link rel="prefetch" href="/assets/js/86.2ac4a603.js"><link rel="prefetch" href="/assets/js/87.124897f0.js"><link rel="prefetch" href="/assets/js/88.47c3d971.js"><link rel="prefetch" href="/assets/js/89.5895f0b5.js"><link rel="prefetch" href="/assets/js/9.31a4cab1.js"><link rel="prefetch" href="/assets/js/90.7ca5dc48.js"><link rel="prefetch" href="/assets/js/91.ccada9a1.js"><link rel="prefetch" href="/assets/js/92.9294107f.js"><link rel="prefetch" href="/assets/js/93.d4c9de39.js"><link rel="prefetch" href="/assets/js/94.93ccdb77.js"><link rel="prefetch" href="/assets/js/95.74646b7c.js"><link rel="prefetch" href="/assets/js/96.f1cd9363.js"><link rel="prefetch" href="/assets/js/97.205ebf8e.js"><link rel="prefetch" href="/assets/js/98.00654d13.js"><link rel="prefetch" href="/assets/js/99.38627a1e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c0326022.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/home/" class="nav-link router-link-active">笔记文档</a></div><div class="nav-item"><a href="/code/" class="nav-link">面试题</a></div><div class="nav-item"><a href="/xmind/" class="nav-link">思维导图</a></div><div class="nav-item"><a href="/once/" class="nav-link">最后冲刺</a></div><div class="nav-item"><a href="https://github.com/2662419405/vuepress_admin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  源码
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">SunHang</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/sunhang32" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://sunhang.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43268396" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/2662419405" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/home/" class="nav-link router-link-active">笔记文档</a></div><div class="nav-item"><a href="/code/" class="nav-link">面试题</a></div><div class="nav-item"><a href="/xmind/" class="nav-link">思维导图</a></div><div class="nav-item"><a href="/once/" class="nav-link">最后冲刺</a></div><div class="nav-item"><a href="https://github.com/2662419405/vuepress_admin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  源码
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">SunHang</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/sunhang32" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客园
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://sunhang.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/qq_43268396" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/2662419405" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/home/" class="sidebar-link">Study-JavaScript 介绍</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用UI库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>版本控制</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css预处理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端进阶</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/home/jin/sheji.html" class="active sidebar-link">前端设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#订阅-发布模式-（观察者）" class="sidebar-link">订阅/发布模式 （观察者）</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#单例模式" class="sidebar-link">单例模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#策略模式" class="sidebar-link">策略模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#代理模式" class="sidebar-link">代理模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#中介者模式" class="sidebar-link">中介者模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#装饰器模式" class="sidebar-link">装饰器模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#外观模式" class="sidebar-link">外观模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#工厂模式" class="sidebar-link">工厂模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#建造者模式" class="sidebar-link">建造者模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#迭代器模式" class="sidebar-link">迭代器模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#享元模式" class="sidebar-link">享元模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#职责链模式" class="sidebar-link">职责链模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#适配器模式" class="sidebar-link">适配器模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#模板方法模式" class="sidebar-link">模板方法模式</a></li><li class="sidebar-sub-header"><a href="/home/jin/sheji.html#备忘录模式" class="sidebar-link">备忘录模式</a></li></ul></li><li><a href="/home/jin/ts.html" class="sidebar-link">typescript</a></li><li><a href="/home/jin/you.html" class="sidebar-link">性能优化</a></li><li><a href="/home/jin/anquan.html" class="sidebar-link">网络安全</a></li><li><a href="/home/jin/ce.html" class="sidebar-link">自动化测试</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高阶框架学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>打包工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务器基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>reactNative开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vscode入门</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端设计模式"><a href="#前端设计模式" class="header-anchor">#</a> 前端设计模式</h1> <blockquote><p>设计模式（Design Pattern）是套被反复使、多数知晓的、经过分类的、代码设计经验的 总结。 任何事情都有套路，设计模式，就是写代码中的常⻅套路， 有些写法我们用常都⼀直在使用</p></blockquote> <h2 id="订阅-发布模式-（观察者）"><a href="#订阅-发布模式-（观察者）" class="header-anchor">#</a> 订阅**/**发布模式 （观察者）</h2> <blockquote><p>pub/sub 这个应该⼤家⽤到最⼴的设计模式了，</p> <p>在这种模式中，并不是一个对象调用另一个对象的方法，而是一个对象订阅另⼀个对象的 特定活动并在</p> <p>状态改编后获得通知。订阅者因此也成为观察者，而被观察的对象成为发布者或者主题。当发⽣了⼀个</p> <p>重要事件时候 发布者会通知（调用）所有订阅者并且可能经常已事件对象的形式传递消息</p></blockquote> <ul><li><p>应用场景</p> <p>https://github.com/vuejs/vue/blob/dev/src/core/instance/events.js#L54</p></li></ul> <h2 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h2> <blockquote><p>单例模式的定义：保证一个类仅有一个实例，并提供一个访问它的全局访问点。实现的方法为先</p> <p>判断实例存在与否，如果存在则直接返回，如果不存在就创建了再返回，这就确保了一个类只有</p> <p>一个实例对象。</p></blockquote> <ul><li>适⽤场景</li></ul> <p>一个单一对象。比如：弹窗，无论点击多少次，弹窗只应该被创建一次' 实现起来也很简</p> <p>单，用一个变量缓存即可</p> <ul><li>应用场景</li></ul> <p>我们再element中的弹窗代码中，可以看到单例模式的实际案例 保证全局唯一性</p> <p>https://github.com/ElemeFE/element/blob/dev/packages/message-box/src/main.js#L79</p> <h2 id="策略模式"><a href="#策略模式" class="header-anchor">#</a> 策略模式</h2> <blockquote><p>策略模式的定义：定义一系列的算法，把他们一个个封装起来，并且使他们可以相互替换。</p> <p>策略模式的作用的就是将算法的使⽤算法的实现分离开来。</p></blockquote> <p>一个基于策略模式的程序⾄少由两部分组成。第一个部分是一组策略类（可变），策略类封装了具体的</p> <p>算法，并负责具体的计算过程。第二个部分是环境类Context（不变），Context接受客户的请求，随后</p> <p>将请求委托给某一个策略类。要做到这一点，说明Context中要维持对某个策略对象的引用</p> <p>举个栗子</p> <p>奖金计算，绩效为 S 的人年 终奖有 4 倍工资，绩效为 A 的人年终奖有 3 倍工资，而绩效为 B 的人年终</p> <p>奖是 2 倍工资</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">calculateBonus</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">performanceLevel<span class="token punctuation">,</span> salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span> performanceLevel <span class="token operator">===</span> <span class="token string">'S'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>开课吧web全栈架构师 
<span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span> performanceLevel <span class="token operator">===</span> <span class="token string">'A'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
<span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span> performanceLevel <span class="token operator">===</span> <span class="token string">'B'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
<span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出:40000 </span>

<span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token number">6000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出:24000 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>使用策略模式</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> strategies <span class="token operator">=</span> <span class="token punctuation">{</span> 
<span class="token string">&quot;S&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
<span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span><span class="token punctuation">,</span> 

<span class="token string">&quot;A&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
<span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span><span class="token punctuation">,</span> 

<span class="token string">&quot;B&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
<span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> 
 <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token keyword">var</span> <span class="token function-variable function">calculateBonus</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">level<span class="token punctuation">,</span> salary</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
<span class="token keyword">return</span> strategies<span class="token punctuation">[</span> level <span class="token punctuation">]</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 输出:80000 </span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">calculateBonus</span><span class="token punctuation">(</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 输出:30000 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>表单校验</li></ul> <blockquote><p>正常写法</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> registerForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> <span class="token string">'registerForm'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

registerForm<span class="token punctuation">.</span><span class="token function-variable function">onsubmit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>userName<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">''</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token function">alert</span> <span class="token punctuation">(</span> <span class="token string">'⽤户名不能为空'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 

 <span class="token punctuation">}</span>开课吧web全栈架构师 

<span class="token keyword">if</span> <span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>password<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token function">alert</span> <span class="token punctuation">(</span> <span class="token string">'密码⻓度不能少于 6 位'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 

 <span class="token punctuation">}</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token regex">/(^1[3|5|8][0-9]{9}$)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>phoneNumber<span class="token punctuation">.</span>value <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token function">alert</span> <span class="token punctuation">(</span> <span class="token string">'⼿机号码格式不正确'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 

 <span class="token punctuation">}</span> 

<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><ul><li>使用策略模式</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> strategies <span class="token operator">=</span> <span class="token punctuation">{</span> 

<span class="token function-variable function">isNonEmpty</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token string">''</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">return</span> errorMsg <span class="token punctuation">;</span> 

 <span class="token punctuation">}</span> 

 <span class="token punctuation">}</span><span class="token punctuation">,</span> 

<span class="token function-variable function">minLength</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> length<span class="token punctuation">,</span> errorMsg</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span> value<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> length <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span> 

 <span class="token punctuation">}</span> 

 <span class="token punctuation">}</span><span class="token punctuation">,</span> 

<span class="token function-variable function">isMobile</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> errorMsg</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// ⼿机号码格式 </span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token regex">/(^1[3|5|8][0-9]{9}$)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span> 

 <span class="token punctuation">}</span> 

 <span class="token punctuation">}</span> 

<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token keyword">var</span> <span class="token function-variable function">Validator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 保存校验规则 </span>

<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token class-name">Validator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> 

<span class="token keyword">var</span> ary <span class="token operator">=</span> rule<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span> <span class="token string">':'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// </span>

<span class="token keyword">var</span> strategy <span class="token operator">=</span> ary<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

ary<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span> dom<span class="token punctuation">.</span>value <span class="token punctuation">)</span><span class="token punctuation">;</span> 

ary<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> errorMsg <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// </span>

<span class="token keyword">return</span> strategies<span class="token punctuation">[</span>strategy<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>dom<span class="token punctuation">,</span> ary<span class="token punctuation">)</span><span class="token punctuation">;</span> 

 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token class-name">Validator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> validatorFunc<span class="token punctuation">;</span> validatorFunc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token function">validatorFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开始校验，并取得校验后的返回信息 </span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> msg <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果有确切的返回值，说明校验没有通过 </span>

<span class="token keyword">return</span> msg<span class="token punctuation">;</span> 

 <span class="token punctuation">}</span> 

 <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token keyword">var</span> <span class="token function-variable function">validataFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">var</span> validator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建⼀个 validator 对象 </span>

<span class="token comment">/***************添加⼀些校验规则****************/</span> 

validator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>userName<span class="token punctuation">,</span> <span class="token string">'isNonEmpty'</span><span class="token punctuation">,</span> <span class="token string">'⽤户名不能为空'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  

validator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>password<span class="token punctuation">,</span> <span class="token string">'minLength:6'</span><span class="token punctuation">,</span> <span class="token string">'密码⻓度不能少于 6位'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

validator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> registerForm<span class="token punctuation">.</span>phoneNumber<span class="token punctuation">,</span> <span class="token string">'isMobile'</span><span class="token punctuation">,</span> <span class="token string">'⼿机号码格式不正确'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">var</span> errorMsg <span class="token operator">=</span> validator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获得校验结果 </span>

<span class="token keyword">return</span> errorMsg<span class="token punctuation">;</span> <span class="token comment">// 返回校验结果 </span>

<span class="token punctuation">}</span> 

<span class="token keyword">var</span> registerForm <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> <span class="token string">'registerForm'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 

registerForm<span class="token punctuation">.</span><span class="token function-variable function">onsubmit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">var</span> errorMsg <span class="token operator">=</span> <span class="token function">validataFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 errorMsg 有确切的返回值，说明未通过校验 </span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> errorMsg <span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token function">alert</span> <span class="token punctuation">(</span> errorMsg <span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 阻⽌表单提交 </span>

 <span class="token punctuation">}</span> 

<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><h2 id="代理模式"><a href="#代理模式" class="header-anchor">#</a> 代理模式</h2> <blockquote><p>代理模式的定义：为⼀个对象提供⼀个代⽤品或占位符，以便控制对它的访问。</p></blockquote> <p>常⽤的虚拟代理形式：某一个花销很大的操作，可以通过虚拟代理的方式延迟到这种需要它的时候才去</p> <p>创建（例：使用虚拟代理实现图片懒加载）</p> <p>图片懒加载的方式：先通过一张loading图占位，然后通过异步的方式加载图片，等图片加载好了再把</p> <p>完成的图片加载到img标签当中。</p> <p>假设我们在做⼀个⽂件同步的功能，当我们选中⼀个 checkbox 的时候，它对应的⽂件就会被同 步到另</p> <p>外⼀台备⽤服务器上⾯。当⼀次选中过多时，会产⽣频繁的⽹络请求。将带来很⼤的开销。可以通过⼀</p> <p>个代理函数 proxySynchronousFile 来收集⼀段时间之内的请求， 最后⼀次性发送给服务器</p> <h2 id="中介者模式"><a href="#中介者模式" class="header-anchor">#</a> 中介者模式</h2> <p>中介者模式的定义：通过⼀个中介者对象，其他所有的相关对象都通过该中介者对象来通信，⽽不是相</p> <p>互引⽤，当其中的⼀个对象发⽣改变时，只需要通知中介者对象即可。通过中介者模式可以解除对象与</p> <p>对象之间的紧耦合关系。</p> <p>例如：现实⽣活中，航线上的⻜机只需要和机场的塔台通信就能确定航线和⻜⾏状态，⽽不需要和所有</p> <p>⻜机通信。同时塔台作为中介者，知道每架⻜机的⻜⾏状态，所以可以安排所有⻜机的起降和航线安</p> <p>排。</p> <p>中介者模式适⽤的场景：例如购物⻋需求，存在商品选择表单、颜⾊选择表单、购买数量表单等等，都</p> <p>会触发change事件，那么可以通过中介者来转发处理这些事件，实现各个事件间的解耦，仅仅维护中介</p> <p>者对象即可。</p> <p>redux，vuex 都属于中介者模式的实际应⽤，我们把共享的数据，抽离成⼀个单独的store， 每个都通</p> <p>过store这个中介来操作对象</p> <p>⽬的就是减少耦合</p> <h2 id="装饰器模式"><a href="#装饰器模式" class="header-anchor">#</a> 装饰器模式</h2> <p>装饰者模式的定义：在不改变对象⾃身的基础上，在程序运⾏期间给对象动态地添加⽅法。常⻅应⽤，</p> <p>react的⾼阶组件, 或者react-redux中的@connect 或者⾃⼰定义⼀些⾼阶组件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span> 

<span class="token keyword">const</span> <span class="token function-variable function">withLog</span> <span class="token operator">=</span> <span class="token parameter">Component</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 

<span class="token comment">// 类组件 </span>

<span class="token keyword">class</span> <span class="token class-name">NewComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span> 

<span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">CompoentRender</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">准备完毕了</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> 

 <span class="token punctuation">}</span> 

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

<span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Component<span class="token operator">&gt;</span> 

 <span class="token punctuation">}</span> 

<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">CompoentRender</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">渲染完毕了</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> 

 <span class="token punctuation">}</span> 

 <span class="token punctuation">}</span> 

<span class="token keyword">return</span> NewComponent 

<span class="token punctuation">}</span> 

<span class="token keyword">export</span> <span class="token punctuation">{</span>withLog<span class="token punctuation">}</span> 

@withLog 

<span class="token keyword">class</span> <span class="token class-name">XX</span> 

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">connect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">,</span> mapDispatchToProps <span class="token operator">=</span> 

<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">WrapComponent</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 

<span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">ConnectComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span> 

<span class="token keyword">static</span> contextTypes <span class="token operator">=</span> <span class="token punctuation">{</span> 

store<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>object开课吧web全栈架构师 

<span class="token punctuation">}</span> 

<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 

<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> context<span class="token punctuation">)</span> 

<span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> 

props<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 

<span class="token punctuation">}</span> 

<span class="token punctuation">}</span> 

<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 

<span class="token keyword">const</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context 

<span class="token comment">// 当前状态 update 后, 放⼊监听器中, ⽤于下⼀次的更新(每次 dispatch 后会执⾏ </span>

subscribe 中的所有函数<span class="token punctuation">)</span> 

store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token punctuation">}</span> 

<span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 

<span class="token keyword">const</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context 

<span class="token keyword">const</span> stateProps <span class="token operator">=</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token keyword">const</span> dispatchProps <span class="token operator">=</span> <span class="token function">bindActionCreators</span><span class="token punctuation">(</span>mapDispatchToProps<span class="token punctuation">,</span> 

store<span class="token punctuation">.</span>dispatch<span class="token punctuation">)</span> 

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 

props<span class="token operator">:</span> <span class="token punctuation">{</span> 

<span class="token operator">...</span>this<span class="token punctuation">.</span>state<span class="token punctuation">.</span>props<span class="token punctuation">,</span> 

<span class="token operator">...</span>stateProps<span class="token punctuation">,</span> 

<span class="token operator">...</span>dispatchProps 

<span class="token punctuation">}</span> 

<span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token punctuation">}</span> 

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 

<span class="token keyword">return</span> <span class="token operator">&lt;</span>WrapComponent <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>state<span class="token punctuation">.</span>props<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>WrapComponent<span class="token operator">&gt;</span> 

<span class="token punctuation">}</span> 

<span class="token punctuation">}</span> 

<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br></div></div><p>假设我们在编写⼀个⻜机⼤战的游戏，随着经验值的增加，我们操作的⻜机对象可以升级成更厉害的⻜</p> <p>机，⼀开始这些⻜机只能发射普通的⼦弹，升到第⼆级时可以发射导弹，升到第三级时可以发射原⼦</p> <p>弹。</p> <p>Function.prototype.before = function( beforefn ){</p> <p>var __self = this; // 保存原函数的引⽤</p> <p>return function(){ // 返回包含了原函数和新函数的&quot;代理&quot;函数</p> <p>beforefn.apply( this, arguments ); // 执⾏新函数，且保证 this 不被劫持，新函</p> <p>数接受的参数 // 也会被原封不动地传⼊原函数，新函数在原函数之前执⾏</p> <p>return __self.apply( this, arguments ); // 执⾏原函数并返回原函数的执⾏结</p> <p>果， // 并且保证 this 不被劫持开课吧web全栈架构师</p> <p>} }</p> <p>Function.prototype.after = function( afterfn ){</p> <p>var __self = this;</p> <p>return function(){</p> <p>var ret = __self.apply( this, arguments );</p> <p>afterfn.apply( this, arguments );</p> <p>return ret;</p> <p>}</p> <p>};</p> <p>⽐如⻚⾯中有⼀个登录 button，点击这个 button 会弹出登录浮层，与此同时要进⾏数据上报， 来统计</p> <p>有多少⽤户点击了这个登录 button</p> <p>var showLogin = function(){</p> <p>console.log( '打开登录浮层' );</p> <p>log( this.getAttribute( 'tag' ) );</p> <p>}</p> <p>var log = function( tag ){</p> <p>console.log( '上报标签为: ' + tag );</p> <p>(new Image).src = 'http:// xxx.com/report?tag=' + tag;</p> <p>}</p> <p>document.getElementById( 'button' ).onclick = showLogin;</p> <p>使⽤装饰器</p> <p>var showLogin = function(){</p> <p>console.log( '打开登录浮层' );</p> <p>}</p> <p>var log = function(){</p> <p>console.log( '上报标签为: ' + this.getAttribute( 'tag' ) );</p> <p>}</p> <p>showLogin = showLogin.after( log ); // 打开登录浮层之后上报数据</p> <p>document.getElementById( 'button' ).onclick = showLogin;</p> <p>装饰者模式和代理模式的结构看起来⾮常相像，这两种模式都描述了怎样为对象提供 ⼀定程度上的间接</p> <p>引⽤，它们的实现部分都保留了对另外⼀个对象的引⽤，并且向那个对象发送 请求。 代理模式和装饰</p> <p>者模式最重要的区别在于它们的意图和设计⽬的。代理模式的⽬的是，当直接访问本体不⽅便或者不符</p> <p>合需要时，为这个本体提供⼀个替代者。本体定义了关键功能，⽽代理提供或拒绝对它的访问，或者在</p> <p>访问本体之前做⼀些额外的事情。装饰者模式的作⽤就是为对 象动态加⼊⾏为。开课吧web全栈架构师</p> <p>其实Vue中的v-input，v-checkbox也可以认为是装饰器模式， 对原⽣的input和checkbox做⼀层装饰</p> <h2 id="外观模式"><a href="#外观模式" class="header-anchor">#</a> 外观模式</h2> <p>外观模式即让多个⽅法⼀起被调⽤</p> <p>涉及到兼容性，参数⽀持多格式，有很多这种代码，对外暴露统⼀的api，⽐如上⾯的$on ⽀持数组，</p> <p>￥offff参数⽀持多个情况， 对⾯只⽤⼀个函数，内部判断实现</p> <p>⾃⼰封装组件库 经常看到</p> <p>myEvent = {</p> <p>stop: function(e) {</p> <p>if (typeof e.preventDefault() === &quot;function&quot;) {</p> <p>e.preventDefault();</p> <p>}</p> <p>if (typeof e.stopPropagation() === &quot;function&quot;) {</p> <p>e.stopPropagation();</p> <p>}</p> <p>//for IE</p> <p>if (typeof e.returnValue === &quot;boolean&quot;) {</p> <p>e.returnValue = false;</p> <p>}</p> <p>if (typeof e.cancelBubble === &quot;boolean&quot;) {</p> <p>e.cancelBubble = true;</p> <p>}</p> <p>}</p> <p>addEvent(dom, type, fn) {</p> <p>if (dom.addEventListener) {</p> <p>dom.addEventListener(type, fn, false);</p> <p>} else if (dom.attachEvent) {</p> <p>dom.attachEvent('on' + type, fn);</p> <p>} else {</p> <p>dom['on' + type] = fn;</p> <p>}</p> <p>}</p> <p>}</p> <h2 id="工厂模式"><a href="#工厂模式" class="header-anchor">#</a> 工厂模式</h2> <p>提供创建对象的接⼝，把成员对象的创建⼯作转交给⼀个外部对象，好处在于消除对象之间的耦合(也就</p> <p>是相互影响)开课吧web全栈架构师</p> <p>常⻅的例⼦，我们的弹窗，message，对外提供的api，都是调⽤api，然后新建⼀个弹窗或者Message</p> <p>的实例，就是典型的⼯⼚模式</p> <p>const Notification = function(options) {</p> <p>if (Vue.prototype.$isServer) return;</p> <p>options = options || {};</p> <p>const userOnClose = options.onClose;</p> <p>const id = 'notification_' + seed++;</p> <p>const position = options.position || 'top-right';</p> <p>options.onClose = function() {</p> <p>Notification.close(id, userOnClose);</p> <p>};</p> <p>instance = new NotificationConstructor({</p> <p>data: options</p> <p>});</p> <p>if (isVNode(options.message)) {</p> <p>instance.$slots.default = [options.message];</p> <p>options.message = 'REPLACED_BY_VNODE';</p> <p>}</p> <p>instance.id = id;</p> <p>instance.$mount();</p> <p>document.body.appendChild(instance.$el);</p> <p>instance.visible = true;</p> <p>instance.dom = instance.$el;</p> <p>instance.dom.style.zIndex = PopupManager.nextZIndex();</p> <p>let verticalOffset = options.offset || 0;</p> <p>instances.filter(item =&gt; item.position === position).forEach(item =&gt; {</p> <p>verticalOffset += item.$el.offsetHeight + 16;</p> <p>});</p> <p>verticalOffset += 16;</p> <p>instance.verticalOffset = verticalOffset;</p> <p>instances.push(instance);</p> <p>return instance;</p> <p>};</p> <p>https://github.com/ElemeFE/element/blob/dev/packages/notifification/src/main.js#L11</p> <h2 id="建造者模式"><a href="#建造者模式" class="header-anchor">#</a> 建造者模式</h2> <p>和⼯⻓模式相⽐，参与了更多创建的过程 或者更复杂开课吧web全栈架构师</p> <p>var Person = function(name, work) {</p> <p>// 创建应聘者缓存对象</p> <p>var _person = new Human();</p> <p>// 创建应聘者姓名解析对象</p> <p>_person.name = new Named(name);</p> <p>// 创建应聘者期望职位</p> <p>_person.work = new Work(work);</p> <p>return _person;</p> <p>};</p> <p>var person = new Person('xiao ming', 'code');</p> <p>console.log(person)</p> <h2 id="迭代器模式"><a href="#迭代器模式" class="header-anchor">#</a> 迭代器模式</h2> <p>迭代器模式是指提供⼀种⽅法顺序访问⼀个聚合对象中的各个元素，⽽⼜不需要暴露该对象的内</p> <p>部表示。迭代器模式可以把迭代的过程从业务逻辑中分离出来,在使⽤迭代器模式之后，即使不关</p> <p>⼼对象的内部构造，也可以按顺序访问其中的每个元素</p> <p>这个⽤的就太多了 each map啥乱遭的</p> <p>var each = function( ary, callback ){</p> <p>for ( var i = 0, l = ary.length; i &lt; l; i++ ){</p> <p>callback.call( ary[i], i, ary[ i ] );</p> <p>}</p> <p>};</p> <p>each( [ 1, 2, 3 ], function( i, n ){</p> <p>alert ( [ i, n ] );</p> <p>})</p> <h2 id="享元模式"><a href="#享元模式" class="header-anchor">#</a> 享元模式</h2> <p>享元(flflyweight)模式是⼀种⽤于性能优化的模式，“flfly”在这⾥是苍蝇的意思，意为蝇量级。享元模</p> <p>式的核⼼是运⽤共享技术来有效⽀持⼤量细粒度的对象。 如果系统中因为创建了⼤量类似的对象</p> <p>⽽导致内存占⽤过⾼，享元模式就⾮常有⽤了。在 JavaScript 中，浏览器特别是移动端的浏览器</p> <p>分配的内存并不算多，如何节省内存就成了⼀件⾮常有意义的事情。</p> <p>假设有个内⾐⼯⼚，⽬前的产品有 50 种男式内⾐和 50 种⼥⼠内⾐，为了推销产品，⼯⼚决定⽣产⼀些</p> <p>塑料模特来穿上他们的内⾐拍成⼴告照⽚。 正常情况下需要 50个男模特和50个⼥模特，然后让他们每</p> <p>⼈分别穿上⼀件内⾐来拍照。开课吧web全栈架构师</p> <p>var Model = function( sex, underwear){</p> <p>this.sex = sex;</p> <p>this.underwear = underwear;</p> <p>};</p> <p>Model.prototype.takePhoto = function(){</p> <p>console.log( 'sex= ' + this.sex + ' underwear=' + this.underwear);</p> <p>};</p> <p>for ( var i = 1; i &lt;= 50; i++ ){</p> <p>var maleModel = new Model( 'male', 'underwear' + i );</p> <p>maleModel.takePhoto();</p> <p>};</p> <p>for ( var j = 1; j &lt;= 50; j++ ){</p> <p>var femaleModel= new Model( 'female', 'underwear' + j );</p> <p>femaleModel.takePhoto();</p> <p>};</p> <p>如上所述，现在⼀共有 50 种男内 ⾐和 50 种⼥内⾐，所以⼀共会产⽣ 100 个对象。如果将来⽣产了</p> <p>10000 种内⾐，那这个程序可能会因为存在如此多的对象已经提前崩溃。 下⾯我们来考虑⼀下如何优化</p> <p>这个场景。虽然有 100 种内⾐，但很显然并不需要 50 个男 模特和 50 个⼥模特。其实男模特和⼥模特</p> <p>各⾃有⼀个就⾜够了，他们可以分别穿上不同的内⾐来拍照。</p> <p>/*只需要区别男⼥模特</p> <p>那我们先把 underwear 参数从构造函数中 移除，构造函数只接收 sex 参数*/</p> <p>var Model = function( sex ){</p> <p>this.sex = sex;</p> <p>};</p> <p>Model.prototype.takePhoto = function(){</p> <p>console.log( 'sex= ' + this.sex + ' underwear=' + this.underwear);</p> <p>};</p> <p>/<em>分别创建⼀个男模特对象和⼀个⼥模特对象</em>/</p> <p>var maleModel = new Model( 'male' ),</p> <p>femaleModel = new Model( 'female' );</p> <p>/<em>给男模特依次穿上所有的男装，并进⾏拍照</em>/</p> <p>for ( var i = 1; i &lt;= 50; i++ ){</p> <p>maleModel.underwear = 'underwear' + i;</p> <p>maleModel.takePhoto();</p> <p>};</p> <p>/<em>给⼥模特依次穿上所有的⼥装，并进⾏拍照</em>/</p> <p>for ( var j = 1; j &lt;= 50; j++ ){</p> <p>femaleModel.underwear = 'underwear' + j;</p> <p>femaleModel.takePhoto();</p> <p>};</p> <p>//只需要两个对象便完成了同样的功能</p> <p>内部状态存储于对象内部</p> <p>内部状态可以被⼀些对象共享开课吧web全栈架构师</p> <p>内部状态独⽴于具体的场景，通常不会改变</p> <p>外部状态取决于具体的场景，并根据场景⽽变化，外部状态不能被共享</p> <p>性别是内部状态，内⾐是外部状态，通过区分这两种状态，⼤⼤减少了系 统中的对象数量。通常来讲，</p> <p>内部状态有多少种组合，系统中便最多存在多少个对象，因为性别 通常只有男⼥两种，所以该内⾐⼚商</p> <p>最多只需要 2 个对象。</p> <p>应⽤案例</p> <p>消息组件开课吧web全栈架构师</p> <p>需求</p> <p>\1. 弹窗逻辑⼀样</p> <p>\2. 四中弹窗，颜⾊，icon不同</p> <p>\3. 接收⽂案</p> <p>交互⽅式——弹出、隐藏，由共享对象所拥有</p> <p>提示icon、背景样式、字体样式提供接⼝可配置</p> <p>使⽤api统⼀</p> <p>Dialog只会在项⽬初始化时被 new ⼀次，每次使⽤Message组件通过改变Dialog的状态获取组件</p> <p>DOM，其实很容易知道new⼀个组件的成本要⽐⼀个组件的更新成本⾼很多</p> <h2 id="职责链模式"><a href="#职责链模式" class="header-anchor">#</a> 职责链模式</h2> <p>职责链模式的定义是:使多个对象都有机会处理请求，从⽽避免请求的发送者和接收者之间的耦合关系，</p> <p>将这些对象连成⼀条链，并沿着这条链传递该请求，直到有⼀个对象处理它为⽌。 职责链模式的名字⾮</p> <p>常形象，⼀系列可能会处理请求的对象被连接成⼀条链，请求在这些对 象之间依次传递，直到遇到⼀个</p> <p>可以处理它的对象，我们把这些对象称为链中的节点</p> <p>假设我们负责⼀个售卖⼿机的电商⽹站，经过分别交纳 500 元定⾦和 200 元定⾦的两轮预定后(订单已</p> <p>在此时⽣成)，现在已经到了正式购买的阶段。 公司针对⽀付过定⾦的⽤户有⼀定的优惠政策。在正式</p> <p>购买后，已经⽀付过 500 元定⾦的⽤ 户会收到 100 元的商城优惠券，200 元定⾦的⽤户可以收到 50 元</p> <p>的优惠券，⽽之前没有⽀付定⾦的⽤户只能进⼊普通购买模式，也就是没有优惠券，且在库存有限的情</p> <p>况下不⼀定保证能买到。</p> <p>var order = function( orderType, pay, stock ){</p> <p>if ( orderType === 1 ){ // 500 元定⾦购买模式</p> <p>if ( pay === true ){ // 已⽀付定⾦</p> <p>console.log( '500 元定⾦预购, 得到 100 优惠券' );</p> <p>} else{ // 未⽀付定⾦，降级到普通购买模式</p> <p>if ( stock &gt; 0 ){ // ⽤于普通购买的⼿机还有库存</p> <p>console.log( '普通购买, ⽆优惠券' );</p> <p>}else{</p> <p>console.log( '⼿机库存不⾜' );</p> <p>}</p> <p>}</p> <p>} else if ( orderType === 2 ){</p> <p>if ( pay === true ){ // 200 元定⾦购买模式</p> <p>console.log( '200 元定⾦预购, 得到 50 优惠券' );</p> <p>}else{</p> <p>if ( stock &gt; 0 ){</p> <p>console.log( '普通购买, ⽆优惠券' );</p> <p>}else{</p> <p>console.log( '⼿机库存不⾜' );</p> <p>}开课吧web全栈架构师</p> <p>}</p> <p>} else if (orderType === 3) {</p> <p>if ( stock &gt; 0 ){</p> <p>console.log( '普通购买, ⽆优惠券' );</p> <p>} else{</p> <p>console.log( '⼿机库存不⾜' );</p> <p>}</p> <p>}</p> <p>};</p> <p>order( 1 , true, 500); // 输出: 500 元定⾦预购, 得到 100 优惠券</p> <p>现在我们采⽤职责链模式重构这段代码，先把 500 元订单、200 元订单以及普通购买分成 3 个函数。</p> <p>接下来把 orderType、pay、stock 这 3 个字段当作参数传递给 500 元订单函数，如果该函数不符合处</p> <p>理条件，则把这个请求传递给后⾯的 200 元订单函数，如果 200 元订单函数依然不能处理该请求，则</p> <p>继续传递请求给普通购买函数。</p> <p>var order500 = function( orderType, pay, stock ){</p> <p>if ( orderType === 1 &amp;&amp; pay === true ){</p> <p>console.log( '500 元定⾦预购，得到 100 优惠券' );</p> <p>} else{</p> <p>return 'nextSuccessor'; // 我不知道下⼀个节点是谁，反正把请求往后⾯传递</p> <p>}</p> <p>};</p> <p>var order200 = function( orderType, pay, stock ){</p> <p>if ( orderType === 2 &amp;&amp; pay === true ){</p> <p>console.log( '200 元定⾦预购，得到 50 优惠券' );</p> <p>} else{</p> <p>return 'nextSuccessor'; // 我不知道下⼀个节点是谁，反正把请求往后⾯传递</p> <p>}</p> <p>};</p> <p>var orderNormal = function( orderType, pay, stock ){</p> <p>if ( stock &gt; 0 ){</p> <p>console.log( '普通购买，⽆优惠券' );</p> <p>} else{</p> <p>console.log( '⼿机库存不⾜' );</p> <p>}</p> <p>};</p> <p>// Chain.prototype.setNextSuccessor 指定在链中的下⼀个节点</p> <p>// Chain.prototype.passRequest 传递请求给某个节点</p> <p>var Chain = function( fn ){</p> <p>this.fn = fn;</p> <p>this.successor = null;</p> <p>};</p> <p>Chain.prototype.setNextSuccessor = function( successor ){</p> <p>return this.successor = successor;开课吧web全栈架构师</p> <p>};</p> <p>Chain.prototype.passRequest = function(){</p> <p>var ret = this.fn.apply( this, arguments );</p> <p>if ( ret === 'nextSuccessor' ){</p> <p>return this.successor &amp;&amp; this.successor.passRequest.apply(</p> <p>this.successor, arguments );</p> <p>}</p> <p>return ret;</p> <p>};</p> <p>var chainOrder500 = new Chain( order500 );</p> <p>var chainOrder200 = new Chain( order200 );</p> <p>var chainOrderNormal = new Chain( orderNormal );</p> <p>chainOrder500.setNextSuccessor( chainOrder200 );</p> <p>chainOrder200.setNextSuccessor( chainOrderNormal);</p> <p>chainOrder500.passRequest( 1, true, 500 ); // 输出:500 元定⾦预购，得到 100 优惠</p> <p>券</p> <p>chainOrder500.passRequest( 2, true, 500 ); // 输出:200 元定⾦预购，得到 50 优惠</p> <p>券</p> <p>chainOrder500.passRequest( 3, true, 500 ); // 输出:普通购买，⽆优惠券</p> <p>chainOrder500.passRequest( 1, false, 0 ); // 输出:⼿机库存不⾜</p> <p>通过改进，我们可以⾃由灵活地增加、移除和修改链中的节点顺序，假如某天⽹站运营⼈员 ⼜想出了⽀</p> <p>持 300 元定⾦购买，那我们就在该链中增加⼀个节点即可</p> <p>var order300 = function(){</p> <p>// 具体实现略</p> <p>};</p> <p>chainOrder300= new Chain( order300 );</p> <p>chainOrder500.setNextSuccessor( chainOrder300);</p> <p>chainOrder300.setNextSuccessor( chainOrder200);</p> <h2 id="适配器模式"><a href="#适配器模式" class="header-anchor">#</a> 适配器模式</h2> <p>适配器模式的作⽤是解决两个软件实体间的接⼝不兼容的问题。使⽤适配器模式之后，原本 由于</p> <p>接⼝不兼容⽽不能⼯作的两个软件实体可以⼀起⼯作。 适配器的别名是包装器(wrapper)，这是⼀</p> <p>个相对简单的模式。在程序开发中有许多这样的 场景:当我们试图调⽤模块或者对象的某个接⼝</p> <p>时，却发现这个接⼝的格式并不符合⽬前的需求。 这时候有两种解决办法，第⼀种是修改原来的</p> <p>接⼝实现，但如果原来的模块很复杂，或者我们拿 到的模块是⼀段别⼈编写的经过压缩的代码，</p> <p>修改原接⼝就显得不太现实了。第⼆种办法是创建 ⼀个适配器，将原接⼝转换为客户希望的另⼀</p> <p>个接⼝，客户只需要和适配器打交道。开课吧web全栈架构师</p> <p>var googleMap = {</p> <p>show: function(){</p> <p>console.log( '开始渲染⾕歌地图' );</p> <p>}</p> <p>};</p> <p>var baiduMap = {</p> <p>display: function(){</p> <p>console.log( '开始渲染百度地图' );</p> <p>}</p> <p>};</p> <p>var baiduMapAdapter = {</p> <p>show: function(){</p> <p>return baiduMap.display();</p> <p>}</p> <p>};</p> <p>renderMap( googleMap ); // 输出:开始渲染⾕歌地图</p> <p>renderMap( baiduMapAdapter ); // 输出:开始渲染百度地图</p> <p>适配器模式主要⽤来解决两个已有接⼝之间不匹配的问题，它不考虑这些接⼝是怎样实 现的，也不考虑</p> <p>它们将来可能会如何演化。适配器模式不需要改变已有的接⼝，就能够 使它们协同作⽤。</p> <p>装饰者模式和代理模式也不会改变原有对象的接⼝，但装饰者模式的作⽤是为了给对象 增加功能。装饰</p> <p>者模式常常形成⼀条⻓的装饰链，⽽适配器模式通常只包装⼀次。代理 模式是为了控制对对象的访问，</p> <p>通常也只包装⼀次。</p> <p>我们设计很多插件，有默认值，也算是适配器的⼀种应⽤， vue的prop校验，default也算是适配器的</p> <p>应⽤了</p> <p>外观模式的作⽤倒是和适配器⽐较相似，有⼈把外观模式看成⼀组对象的适配器，但外观模式最显著的</p> <p>特点是定义了⼀个新的接⼝。</p> <h2 id="模板方法模式"><a href="#模板方法模式" class="header-anchor">#</a> 模板方法模式</h2> <p>模板⽅法模式在⼀个⽅法中定义⼀个算法的⻣架，⽽将⼀些步骤的实现延迟到⼦类中。模板⽅法</p> <p>使得⼦类可以在不改变算法结构的情况下，重新定义算法中某些步骤的具体实现</p> <p>这个我们⽤的很多，vue中的slot，react中的children</p> <h2 id="备忘录模式"><a href="#备忘录模式" class="header-anchor">#</a> 备忘录模式</h2> <p>可以恢复到对象之前的某个状态，其实⼤家学习react或者redux的时候，时间旅⾏的功能，就算是备忘</p> <p>录模式的⼀个应⽤</p> <p>https://zh-hans.reactjs.org/tutorial/tutorial.html#implementing-time-travel开课吧web全栈架构师</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/2662419405/vuepress_admin/edit/master/docs/home/jin/sheji.md" target="_blank" rel="noopener noreferrer">发现问题!即使纠正</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新 : </span> <span class="time">1/19/2020, 5:38:10 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/home/Vue/chuji.html" class="prev">
          初级
        </a></span> <span class="next"><a href="/home/jin/ts.html">
          typescript
        </a>
        →
      </span></p></div>  <div class="warning custom-block juzhong"><p class="custom-block-title">
      关于评论
    </p> <p>
      评论前请填好“昵称”、“邮箱”这两栏内容，否则不会收到回复，谢谢！
    </p></div> <div id="valine-vuepress-comment"><!----></div></main> <div class="rightTop" data-v-555d7bb6><ul data-v-555d7bb6><li title="放大字体" data-v-555d7bb6>
      +
    </li> <li title="缩小字体" data-v-555d7bb6>
      -
    </li> <li title="夜晚主题" data-v-555d7bb6><svg t="1578986925182" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6201" width="200" height="200" class="icon" data-v-555d7bb6><path d="M518.8 512.7c0-178.9 116.1-330.9 278.5-389.1-45.6-16.3-94.6-25.7-145.9-25.7C417 97.9 227 283.7 227 512.7c0 229.1 190 414.8 424.5 414.8 51.4 0 100.3-9.4 145.9-25.7-162.5-58.1-278.6-210.1-278.6-389.1z" p-id="6202" fill="#ffffff" data-v-555d7bb6></path></svg></li> <li title="繁体切换" class="fan" data-v-555d7bb6>
      繁
    </li> <li title="设置" data-v-555d7bb6><svg t="1578981647151" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5499" width="200" height="200" class="icon donghua" data-v-555d7bb6><path d="M881 512c0-52.4 32.9-96.8 79-114.5-11-43.2-28-83.9-50.2-121.3C864.6 296.3 810 288.1 773 251c-37-37-45.2-91.7-25.1-136.8C710.4 92 669.7 75 626.5 64c-17.8 46.1-62.2 79-114.5 79-52.4 0-96.8-32.9-114.5-79-43.2 11-83.9 28-121.3 50.2 20.1 45.2 11.9 99.8-25.1 136.8-37 37-91.7 45.2-136.8 25.2C92 313.6 75 354.3 64 397.5c46.1 17.8 79 62.2 79 114.5 0 52.4-32.9 96.8-79 114.5 11 43.2 28 83.9 50.2 121.3C159.4 727.7 214 735.9 251 773c37 37 45.2 91.7 25.1 136.8C313.6 932 354.3 949 397.5 960c17.8-46.1 62.2-79 114.5-79 52.4 0 96.8 32.9 114.5 79 43.2-11 83.9-28 121.3-50.2-20.1-45.2-11.9-99.8 25.1-136.8 37-37 91.7-45.2 136.8-25.2C932 710.4 949 669.7 960 626.5c-46.1-17.7-79-62.1-79-114.5zM512 635c-67.9 0-123-55.1-123-123s55.1-123 123-123 123 55.1 123 123-55.1 123-123 123z" p-id="5500" fill="#ffffff" data-v-555d7bb6></path></svg></li></ul></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2216b0d7.js" defer></script><script src="/assets/js/2.68a23561.js" defer></script><script src="/assets/js/3.5044cbf1.js" defer></script><script src="/assets/js/43.d247f190.js" defer></script>
  </body>
</html>
