(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{93:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"我真的懂-this-吗"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#我真的懂-this-吗"}},[s._v("#")]),s._v(" 我真的懂 this 吗")]),s._v(" "),n("h2",{attrs:{id:"先知"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#先知"}},[s._v("#")]),s._v(" 先知")]),s._v(" "),n("blockquote",[n("p",[s._v("this 实际上是在函数被调用时发生的绑定，它指向哪里完全取决于函数在哪里被调用。")])]),s._v(" "),n("h3",{attrs:{id:"大提示-不想看分析的可以直接拉到最后看结论。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#大提示-不想看分析的可以直接拉到最后看结论。"}},[s._v("#")]),s._v(" 大提示: 不想看分析的可以直接拉到最后看结论。")]),s._v(" "),n("h3",{attrs:{id:"面试常见题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#面试常见题"}},[s._v("#")]),s._v(" 面试常见题")]),s._v(" "),n("h4",{attrs:{id:"第一题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一题"}},[s._v("#")]),s._v(" 第一题")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(){\n  console.log(this.a)\n}\nvar obj = {\n  a :2,\n  foo:foo\n}\nvar bar = obj.foo\nobj.foo() \nbar()  \n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("问： 最后两个打印出什么？")]),s._v(" "),n("h4",{attrs:{id:"第二题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二题"}},[s._v("#")]),s._v(" 第二题")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(){\n  console.log(this.a)\n}\nvar obj = {\n  a :2,\n  foo:foo\n}\nvar obj2 = {\n  a:1,\n  obj:obj\n}\nvar obj3 = obj2.obj.foo\nobj2.obj.foo() // 2\nobj3() //undefined\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("问： 最后两个打印出什么？ 答？")]),s._v(" "),n("h2",{attrs:{id:"我们如何理解-this-绑定的到底是谁？或者说-this-到底是谁？下面介绍四种方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#我们如何理解-this-绑定的到底是谁？或者说-this-到底是谁？下面介绍四种方法"}},[s._v("#")]),s._v(" 我们如何理解 this 绑定的到底是谁？或者说 this 到底是谁？下面介绍四种方法")]),s._v(" "),n("h3",{attrs:{id:"_1-默认绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-默认绑定"}},[s._v("#")]),s._v(" 1. 默认绑定")]),s._v(" "),n("p",[s._v("什么是默认绑定呢？上代码先")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("var a = 2;\nfunction foo(){\n  console.log(this.a)\n}\nfunction foo2(){\n  'use strict'\n  console.log(this.a)\n}\nfoo() // 2\nfoo2() //  TypeError: Cannot read property 'a' of undefined\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("ul",[n("li",[s._v("在上面的代码中，「 foo() 直接使用时不带任何修饰的函数引用进行调用的 」， 因此只能使用「默认绑定」")]),s._v(" "),n("li",[s._v("所以到 foo() 中的 this 绑定到「 全局对象 window 」，而「 严格模式 」时，全局对象无法被绑定，所以 this 绑定到 「undefined」")])]),s._v(" "),n("p",[n("strong",[s._v("默认绑定总结：默认绑定即不带任何修饰的函数引用被调用时的绑定，此时 this 绑定到「 全局对象 window 」或者 「undefined」")])]),s._v(" "),n("h3",{attrs:{id:"_2-隐式绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-隐式绑定"}},[s._v("#")]),s._v(" 2. 隐式绑定")]),s._v(" "),n("h4",{attrs:{id:"隐式绑定是什么呢？隐式的绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#隐式绑定是什么呢？隐式的绑定"}},[s._v("#")]),s._v(" 隐式绑定是什么呢？隐式的绑定")]),s._v(" "),n("blockquote",[n("p",[s._v("当函数引用有上下文对象时，隐式绑定会把函数调用中的 this 绑定到这个上下文对象。")])]),s._v(" "),n("p",[n("strong",[s._v("那么回到面试题")])]),s._v(" "),n("h4",{attrs:{id:"_2-1-面试题一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-面试题一"}},[s._v("#")]),s._v(" 2.1 面试题一")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(){ console.log(this.a)}\nvar obj = { a :2,  foo:foo }\nvar bar = obj.foo\nobj.foo() //2\nbar()  /undefined\n\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("foo() 被调用时，落脚点指向 obj 对象（上下文对象），所以 this 绑定到 obj ，this.a 即 obj.a , 所以打印出了 2")]),s._v(" "),n("p",[n("strong",[s._v("但是为什么 bar() 打印出了 undefined 呢？")])]),s._v(" "),n("p",[s._v("虽然 bar 是 obj.foo 的引用，但实际上是 foo函数 本身的引用，所以此时 bar() 是不带任何修饰的函数调用，使用默认调用")]),s._v(" "),n("h4",{attrs:{id:"_2-2-面试题二"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-面试题二"}},[s._v("#")]),s._v(" 2.2 面试题二")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(){ console.log(this.a)  }\nvar obj = {  a :2,  foo:foo  }\nvar obj2 = {  a:1,  obj:obj   }\nvar obj3 = obj2.obj.foo\nobj2.obj.foo() // 2\nobj3() //undefined\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("跟上面一题相同，虽然引用链比较长，但是最后 foo() 是在 obj 中被调用，所以 this 绑定到 obj ，引用链只有最后一层影响调用位置。")]),s._v(" "),n("h4",{attrs:{id:"隐式绑定总结-：-函数在上下文对象中调用时，-this-绑定到-上下文对象上。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#隐式绑定总结-：-函数在上下文对象中调用时，-this-绑定到-上下文对象上。"}},[s._v("#")]),s._v(" 隐式绑定总结 ： 函数在上下文对象中调用时， this 绑定到 上下文对象上。")]),s._v(" "),n("h3",{attrs:{id:"_3-显式绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-显式绑定"}},[s._v("#")]),s._v(" 3. 显式绑定")]),s._v(" "),n("blockquote",[n("p",[s._v("使用「 call apply bind 」 进行绑定 this , this 绑定到第一个传入的参数")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://link.juejin.im/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fcall%23",target:"_blank",rel:"noopener noreferrer"}},[s._v("MDN三者的用法"),n("OutboundLink")],1)]),s._v(" "),n("h4",{attrs:{id:"_3-1-call-的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-call-的使用"}},[s._v("#")]),s._v(" 3.1 call 的使用")]),s._v(" "),n("p",[s._v("回到面试题第一题，我们使用「 call 」进行显式绑定")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(){ console.log(this.a)  }\nvar obj = {\n  a :2,\n  foo:foo\n}\nvar bar =obj.foo\nobj.foo() // 2\nbar.call(obj) //2\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("此时两者都打印出 2 ，因为我们将 this 绑定到 obj ，打印出的即是 "),n("a",{attrs:{href:"https://link.juejin.im/?target=%2F%2Fobj.a",target:"_blank",rel:"noopener noreferrer"}},[s._v("//obj.a"),n("OutboundLink")],1),s._v(" //2")]),s._v(" "),n("h4",{attrs:{id:"_3-2-apply-绑定第一个参数是-this-二参是-一个数组"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-apply-绑定第一个参数是-this-二参是-一个数组"}},[s._v("#")]),s._v(" 3.2 apply 绑定第一个参数是 this , 二参是 一个数组")]),s._v(" "),n("h4",{attrs:{id:"_3-3-bind-是-绑定第一个参数是-this"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-bind-是-绑定第一个参数是-this"}},[s._v("#")]),s._v(" 3.3 bind 是 绑定第一个参数是 this")]),s._v(" "),n("h4",{attrs:{id:"显式绑定总结-使用call-apply-bind-时，第一个参数是-this-，不传的话，默认为-undefined-。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#显式绑定总结-使用call-apply-bind-时，第一个参数是-this-，不传的话，默认为-undefined-。"}},[s._v("#")]),s._v(" 显式绑定总结: 使用call apply bind 时，第一个参数是 this ，不传的话，默认为 undefined 。")]),s._v(" "),n("h3",{attrs:{id:"_4-new-绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-new-绑定"}},[s._v("#")]),s._v(" 4. new 绑定")]),s._v(" "),n("h5",{attrs:{id:"使用-new-来调用函数，-到底做了什么-？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-new-来调用函数，-到底做了什么-？"}},[s._v("#")]),s._v(" 使用 new 来调用函数， 到底做了什么 ？")]),s._v(" "),n("ul",[n("li",[n("ol",[n("li",[s._v("创建一个全新的对象")])])]),s._v(" "),n("li",[n("ol",[n("li",[s._v("这个新对象的__proto__ 链接到 构造函数的 prototype")])])]),s._v(" "),n("li",[n("ol",[n("li",[s._v("这个新对象会绑定到函数调用的 this")])])]),s._v(" "),n("li",[n("ol",[n("li",[s._v("如果函数没有返回其他对象，那么 new 表达式中的函数调用会自动返回这个新对象。")])])])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("function foo(a){\n  this.a = a \n}\nvar bar = new foo(2)\n\nconsole.log(bar.a) // 2\n复制代码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("分析： 使用 new 调用 foo() 时，我们构造一个对象并把它绑定到 foo() 调用的 this 上")]),s._v(" "),n("h4",{attrs:{id:"new-绑定总结：-new-绑定中-this-绑定的就是新生成的对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#new-绑定总结：-new-绑定中-this-绑定的就是新生成的对象"}},[s._v("#")]),s._v(" new 绑定总结： new 绑定中 this 绑定的就是新生成的对象")]),s._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),n("ul",[n("li",[n("ol",[n("li",[s._v("「 箭头函数 」内的 this 就是外面的 this ，外面的 this 是啥看下面四条")])])]),s._v(" "),n("li",[s._v("2 . 「 new 绑定 」函数是否在 new 中调用 ？ 如果是 this 绑定的即是 新创建的对象。 var bar = new foo()")]),s._v(" "),n("li",[n("ol",[n("li",[s._v("「 显式绑定 」函数是否通过 call 、apply、 bind 绑定？this绑定的时第一个参数 var bar = foo.call(obj)")])])]),s._v(" "),n("li",[s._v("4.「 隐式绑定 」 函数是否在某个上下文中调用？ 是的话，this 绑定的是那个上下文对象 var bar = obj.foo()")]),s._v(" "),n("li",[n("ol",[n("li",[s._v("「 默认绑定」如果都不是，那么就是默认绑定。严格模式绑定到 undefined ，否则绑定到 全局对象 var bar = foo()")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);